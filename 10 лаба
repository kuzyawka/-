2


#include <iostream>
#include <io.h> // для функции _setmode
#include <fcntl.h> // для константы _O_U16TEXT 
#include <iomanip>
#include <ctype.h>
#include <string>
#include <cmath>
#include <ctime>
#include <cstdlib>
using namespace std;
// класс, представляющий издание (результат работы издательской компании) 
class publication
{
private:
	wstring title; // название издания
	float price; // цена экземпляра издания 
public:
	virtual void getdata()
	{
		wcout << L"\n введите название издания: "; getline(ws(wcin), title); 
		wcout << L" введите цену экземпляра издания: "; wcin >> price;
	}
	virtual void putdata() const
	{
		wcout << L"\n название издания: " << title;
		wcout << L"\n цена экземпляра издания: " << price << endl;
	}
};

// класс, представляющий бумажную книгу (производный от класса, представляющего издание)
class book : public publication
{
private:
	int pages; // количество страниц в книге 
public:
	void getdata()

	{
		publication::getdata();
		wcout << L" введите количество страниц в книге: "; wcin >> pages;
	}
	void putdata() const
	{
		publication::putdata();
		wcout << L" количество страниц в книге: " << pages << endl;
	}
};

// класс, представляющий аудиокнигу (производный от класса, представляющего издание)
class tape : public publication
{
private:
	float playing_time; // время проигрывания аудиокниги в минутах
public:
	void getdata()
	{
		publication::getdata();
		wcout << L" введите время проигрывания аудиокниги в минутах: "; wcin >> playing_time;
	}
		void putdata() const
	{
			publication::putdata();
			wcout << L" время проигрывания аудиокниги в минутах: " << playing_time << endl;
	}
};

int main()
{
	// переключение стандартного потока вывода в формат Юникода
	_setmode(_fileno(stdout), _O_U16TEXT);
	// переключение стандартного потока ввода в формат Юникода
	_setmode(_fileno(stdin), _O_U16TEXT);

	publication* pubPtr[100]; // массив указателей на объекты класса publication 
	int n = 0;	// количество действительно занятых элементов массива 
	wchar_t choice;		// символ, отражающий выбор пользователя

	// пользователь в цикле вводит данные изданий 
	do {
	wcout << L"Вводим бумажную или аудиокнигу? (б/а): "; wcin >> choice; if (choice == L'б')	// поместить новый объект-бумажную книгу
		pubPtr[n] = new book; //	в массив
	else		// поместить новый объект-аудиокассету
		pubPtr[n] = new tape; //	в массив
		wcout << L"Ввод данных издания " << n + 1 << L":";
		pubPtr[n++]->getdata(); // получим данные издания у пользователя
		wcout << L"\nВвести следующее издание? (y/n): "; wcin >> choice; wcout <<endl;

} while (choice == L'y'); // цикл выполняется, пока ответ «да»

// выведем на экран данные введенных выше изданий
for (int j = 0; j < n; j++)
	{
		wcout << L"Данные издания " << j + 1 << L":"; 
		pubPtr[j]->putdata();
	}

	return 0;
}




3



